<html>
    <head>
    </head>
    <body>

        <canvas id="myChart" width="100px" height="50px"></canvas>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.min.js"></script>
        <script
            src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>
        
        <script>
            let maxDataPoints = 1000;

            $(document).ready(function(){
                $.getJSON( "/api", function( resp ) {
                    var ctx = document.getElementById("myChart").getContext("2d");
                    
                    console.log(resp);

                    let colors = ["red", "green", "yellow", "violet", "gold", "grey", "brown", "purple", "red", "green", "yellow", "violet", "gold", "grey", "brown", "purple"]

                    let stepsize = 1;
                    let len = resp[0].data.length;
                    if(len > maxDataPoints)
                    {
                        stepsize = Math.floor(len / maxDataPoints);
                    }

                    var datasets = [];
                    for(let i in resp)
                    {
                        let onlyValues = [];
                        for(let a = 0; a < resp[i].data.length; a += stepsize)
                            onlyValues.push(resp[i].data[a].value);

                        datasets.push({
                            label: resp[i].name,
                            fill: false,
                            borderColor: colors[i],
                            borderWidth: "2px",
                            data: onlyValues
                        });
                    }

                    let dates = [];
                    for(let a = 0; a < resp[0].data.length; a += stepsize)
                        dates.push(resp[0].data[a].timestamp);

                    let data = {
                        labels: dates,
                        datasets: datasets
                    };

                    console.log(data);

                    var myRadarChart = new Chart(ctx, {
                        type: 'line',
                        data: data
                    });
                }); 
            });
        </script>
    </body>
</html>